_HiStOrY_V2_
--\040Gunakan\040database\040sistem
USE\040mysql;
--\040Update\040password\040untuk\040root@localhost
UPDATE\040user\040SET\040authentication_string\040=\040PASSWORD('zhigen123')\040WHERE\040User\040=\040'root'\040AND\040Host\040=\040'localhost';
--\040Untuk\040versi\040baru,\040mungkin\040gunakan:
ALTER\040USER\040'root'@'localhost'\040IDENTIFIED\040BY\040'zhigen123';
--\040Flush\040privileges
FLUSH\040PRIVILEGES;
--\040Keluar
EXIT;
ALTER\040USER\040'root'@'localhost'\040IDENTIFIED\040BY\040'zhigen123';
FLUSH\040PRIVILEGES;
CREATE\040DATABASE\040simrs_db\040CHARACTER\040SET\040utf8mb4\040COLLATE\040utf8mb4_unicode_ci;
USE\040simrs_db;
CREATE\040TABLE\040pasien\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040nomor_rm\040VARCHAR(20)\040UNIQUE\040NOT\040NULL,
\040\040\040\040nama\040VARCHAR(100)\040NOT\040NULL,
\040\040\040\040jenis_kelamin\040ENUM('L',\040'P')\040NOT\040NULL,
\040\040\040\040tanggal_lahir\040DATE\040NOT\040NULL,
\040\040\040\040alamat\040TEXT,
\040\040\040\040no_telepon\040VARCHAR(15),
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040pasien\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040nomor_rm\040VARCHAR(20)\040UNIQUE\040NOT\040NULL,\040\040\040\040\040nama\040VARCHAR(100)\040NOT\040NULL,\040\040\040\040\040jenis_kelamin\040ENUM('L',\040'P')\040NOT\040NULL,\040\040\040\040\040tanggal_lahir\040DATE\040NOT\040NULL,\040\040\040\040\040alamat\040TEXT,\040\040\040\040\040no_telepon\040VARCHAR(15),\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
CREATE\040TABLE\040dokter\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040nama\040VARCHAR(100)\040NOT\040NULL,
\040\040\040\040spesialisasi\040VARCHAR(100)\040NOT\040NULL,
\040\040\040\040no_izin_praktek\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,
\040\040\040\040no_telepon\040VARCHAR(15),
\040\040\040\040alamat\040TEXT,
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040dokter\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040nama\040VARCHAR(100)\040NOT\040NULL,\040\040\040\040\040spesialisasi\040VARCHAR(100)\040NOT\040NULL,\040\040\040\040\040no_izin_praktek\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,\040\040\040\040\040no_telepon\040VARCHAR(15),\040\040\040\040\040alamat\040TEXT,\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
CREATE\040TABLE\040users\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040username\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,
\040\040\040\040password\040VARCHAR(255)\040NOT\040NULL,\040--\040Akan\040di-hash
\040\040\040\040role\040ENUM('admin',\040'dokter',\040'perawat',\040'kasir')\040NOT\040NULL,
\040\040\040\040nama_lengkap\040VARCHAR(100)\040NOT\040NULL,
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040users\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040username\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,\040\040\040\040\040password\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040role\040ENUM('admin',\040'dokter',\040'perawat',\040'kasir')\040NOT\040NULL,\040\040\040\040\040nama_lengkap\040VARCHAR(100)\040NOT\040NULL,\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040);
CREATE\040TABLE\040rekam_medis\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040pasien_id\040INT\040NOT\040NULL,
\040\040\040\040dokter_id\040INT\040NOT\040NULL,
\040\040\040\040tanggal_periksa\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040keluhan\040TEXT,
\040\040\040\040diagnosis\040TEXT,
\040\040\040\040tindakan\040TEXT,
\040\040\040\040resep\040TEXT,
\040\040\040\040FOREIGN\040KEY\040(pasien_id)\040REFERENCES\040pasien(id)\040ON\040DELETE\040CASCADE,
\040\040\040\040FOREIGN\040KEY\040(dokter_id)\040REFERENCES\040dokter(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040rekam_medis\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040pasien_id\040INT\040NOT\040NULL,\040\040\040\040\040dokter_id\040INT\040NOT\040NULL,\040\040\040\040\040tanggal_periksa\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040keluhan\040TEXT,\040\040\040\040\040diagnosis\040TEXT,\040\040\040\040\040tindakan\040TEXT,\040\040\040\040\040resep\040TEXT,\040\040\040\040\040FOREIGN\040KEY\040(pasien_id)\040REFERENCES\040pasien(id)\040ON\040DELETE\040CASCADE,\040\040\040\040\040FOREIGN\040KEY\040(dokter_id)\040REFERENCES\040dokter(id)\040ON\040DELETE\040CASCADE\040);
CREATE\040TABLE\040billing\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040pasien_id\040INT\040NOT\040NULL,
\040\040\040\040total\040DECIMAL(10,2)\040NOT\040NULL,
\040\040\040\040status\040ENUM('Belum\040Bayar',\040'Lunas')\040DEFAULT\040'Belum\040Bayar',
\040\040\040\040tanggal_tagihan\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040tanggal_bayar\040DATETIME\040NULL,
\040\040\040\040FOREIGN\040KEY\040(pasien_id)\040REFERENCES\040pasien(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040billing\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040pasien_id\040INT\040NOT\040NULL,\040\040\040\040\040total\040DECIMAL(10,2)\040NOT\040NULL,\040\040\040\040\040status\040ENUM('Belum\040Bayar',\040'Lunas')\040DEFAULT\040'Belum\040Bayar',\040\040\040\040\040tanggal_tagihan\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040tanggal_bayar\040DATETIME\040NULL,\040\040\040\040\040FOREIGN\040KEY\040(pasien_id)\040REFERENCES\040pasien(id)\040ON\040DELETE\040CASCADE\040);
INSERT\040INTO\040users\040(username,\040password,\040role,\040nama_lengkap)\040
VALUES\040('admin',\040'$2a$10$G9sNYdaCW1YOyW4IJT7oIuJnq.6U3qF6L8V7J4Y5Z6X7C8V9B0N1O',\040'admin',\040'Gendri\040Ruus');
INSERT\040INTO\040users\040(username,\040password,\040role,\040nama_lengkap)\040\040VALUES\040('admin',\040'$2a$10$G9sNYdaCW1YOyW4IJT7oIuJnq.6U3qF6L8V7J4Y5Z6X7C8V9B0N1O',\040'admin',\040'Gendri\040Ruus');
SHOW\040TABLES;
EXIT;
